# Template file for 'usb-phone-cam'
pkgname=usb-phone-cam
version=1.0.1
revision=1
# build_style=gnu-makefile  <-- Removed: We don't have a Makefile
depends="python3 python3-tornado android-tools"
short_desc="Turn Android phone into USB Webcam (WebCodecs/H.264)"
maintainer="Alhassan <alhassan200012@gmail.com>"
license="MIT"
homepage="https://github.com/alhassanmohamed2/USB-Phone-Cam"
distfiles="https://github.com/alhassanmohamed2/USB-Phone-Cam/archive/refs/tags/v${version}.tar.gz"
checksum=be2e036e8309a85aef13d5d72035bdd820db2537feff330df365c24fffbe1486

do_build() {
    : # No compilation needed, just a script
}

do_install() {
	# Create directory structure
	vmkdir usr/share/usb-phone-cam
	
	# Copy Project Files
	vcopy server.py usr/share/usb-phone-cam/
	vcopy public usr/share/usb-phone-cam/
	vcopy start_usb.sh usr/share/usb-phone-cam/
	vcopy launch.sh usr/share/usb-phone-cam/
	
	# Install Desktop Entry
	vinstall UsbCamera.desktop 644 usr/share/applications/
	
	# Create /usr/bin symlink
	vmkdir usr/bin
	ln -s /usr/share/usb-phone-cam/launch.sh ${DESTDIR}/usr/bin/usb-phone-cam
	
	# License
	vlicense LICENSE
}
